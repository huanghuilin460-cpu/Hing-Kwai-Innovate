<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Hing Kwai Innovate | 以人為本的創新</title>
<style>
   :root {
     --primary-color: #406c84;
     --secondary-color: #f2f4f6;
     --accent-color: #f3a953;
     --text-color: #333;
     --light-text: #555;
     --border-color: #e0e0e0;
     --error-color: #dc3545;
     --max-width: 1200px;
   }

   /* 深色模式支持 */
   @media (prefers-color-scheme: dark) {
     :root {
       --primary-color: #689fb9;
       --secondary-color: #1a1a2e;
       --text-color: #f2f4f6;
       --light-text: #ccc;
       --border-color: #333;
     }
     
     body {
       background-color: var(--secondary-color);
       color: var(--text-color);
     }
     
     .product, header {
       background-color: #24243e;
     }
     
     .product:hover {
       border-color: var(--accent-color);
     }
   }

   * { box-sizing: border-box; margin: 0; padding: 0; }
   body {
     font-family: "Helvetica Neue", "Noto Sans TC", "Noto Sans SC", sans-serif;
     color: var(--text-color);
     background-color: var(--secondary-color);
     line-height: 1.6;
     transition: all 0.3s ease;
   }
   html {
     scroll-behavior: smooth; /* 平滑滚动 */
     scroll-padding-top: 80px; /* 避开导航栏 */
   }
   header {
     background-color: white;
     box-shadow: 0 2px 10px rgba(0,0,0,0.05);
     position: sticky;
     top: 0;
     z-index: 100;
     transition: background-color 0.3s ease;
   }
   header.scrolled {
     background-color: rgba(255, 255, 255, 0.95);
     box-shadow: 0 4px 15px rgba(0,0,0,0.1);
   }
   .nav-container {
     max-width: var(--max-width);
     margin: auto;
     display: flex;
     justify-content: space-between;
     align-items: center;
     padding: 1rem 2rem;
   }
   .logo {
     font-size: 1.5rem;
     font-weight: bold;
     color: var(--primary-color);
     white-space: nowrap;
   }
   .desktop-nav {
     display: flex;
     align-items: center;
   }
   .desktop-nav a {
     text-decoration: none;
     color: var(--text-color);
     margin-left: 1.2rem;
     font-weight: 500;
     transition: color 0.3s ease;
   }
   .desktop-nav a:hover, .desktop-nav a:focus {
     color: var(--primary-color);
   }
   /* 语言选择下拉框样式 */
   .lang-selector {
     margin-left: 1.2rem;
   }
   .lang-select {
     border: 1px solid var(--primary-color);
     background: white;
     color: var(--primary-color);
     border-radius: 4px;
     padding: 0.4rem 0.7rem;
     cursor: pointer;
     font-weight: bold;
     transition: all 0.3s ease;
     appearance: none;
     background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='6' viewBox='0 0 12 6'%3E%3Cpath fill='%23406c84' d='M10.293 0.293a1 1 0 0 1 1.414 1.414L6 6l-5.707-5.293a1 1 0 1 1 1.414-1.414L6 3.172l4.88-4.88z'/%3E%3C/svg%3E");
     background-repeat: no-repeat;
     background-position: right 0.5rem center;
     padding-right: 2rem;
   }
   .lang-select:hover, .lang-select:focus {
     background-color: var(--primary-color);
     color: white;
     background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='6' viewBox='0 0 12 6'%3E%3Cpath fill='white' d='M10.293 0.293a1 1 0 0 1 1.414 1.414L6 6l-5.707-5.293a1 1 0 1 1 1.414-1.414L6 3.172l4.88-4.88z'/%3E%3C/svg%3E");
   }
   .mobile-menu-btn {
     display: none;
     background: none;
     border: none;
     font-size: 1.5rem;
     cursor: pointer;
     color: var(--primary-color);
   }
   .mobile-nav {
     display: none;
     position: absolute;
     top: 100%;
     left: 0;
     right: 0;
     background-color: white;
     box-shadow: 0 4px 10px rgba(0,0,0,0.1);
     padding: 1rem 2rem;
     flex-direction: column;
     gap: 1rem;
   }
   .mobile-nav.active {
     display: flex;
   }
   .mobile-nav a {
     text-decoration: none;
     color: var(--text-color);
     font-weight: 500;
     padding: 0.5rem 0;
     border-bottom: 1px solid var(--border-color);
   }
   .mobile-nav a:last-child {
     border-bottom: none;
   }
   .mobile-nav a:hover, .mobile-nav a:focus {
     color: var(--primary-color);
   }
   .mobile-nav .lang-selector {
     margin-left: 0;
     margin-top: 0.5rem;
   }
   .mobile-nav .lang-select {
     width: 100%;
     padding: 0.6rem;
   }
   .hero {
     background: linear-gradient(135deg, var(--primary-color) 0%, #689fb9 100%);
     color: white;
     text-align: center;
     padding: 6rem 2rem;
   }
   .hero h1 { font-size: 2rem; margin-bottom: 1rem; }
   .hero p { font-size: 1.1rem; max-width: 600px; margin: auto; }
   .section {
     max-width: var(--max-width);
     margin: 4rem auto;
     padding: 0 2rem;
   }
   .section h2 {
     text-align: center;
     font-size: 1.8rem;
     color: var(--primary-color);
     margin-bottom: 2rem;
     position: relative;
   }
   .section h2::after {
     content: "";
     display: block;
     width: 60px;
     height: 3px;
     background-color: var(--accent-color);
     margin: 0.8rem auto 0;
   }
   .about p {
     text-align: center;
     max-width: 700px;
     margin: auto;
     color: var(--light-text);
     font-size: 1.1rem;
     line-height: 1.8;
   }
   /* 产品网格（兼容性优化） */
   .products {
     display: -ms-grid;
     display: grid;
     -ms-grid-columns: repeat(auto-fit, minmax(280px, 1fr));
     grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
     gap: 2rem;
   }
   .product {
     background: white;
     border-radius: 8px;
     box-shadow: 0 4px 10px rgba(0,0,0,0.05);
     padding: 1.5rem;
     transition: transform 0.3s, box-shadow 0.3s, border-color 0.3s;
     border: 2px solid transparent;
     display: -ms-flexbox;
     display: flex;
     -ms-flex-direction: column;
     flex-direction: column;
   }
   .product:hover {
     transform: translateY(-5px);
     box-shadow: 0 8px 20px rgba(0,0,0,0.12);
     border-color: var(--primary-color);
   }
   .product-img {
     width: 100%;
     height: 180px;
     object-fit: cover;
     border-radius: 4px;
     margin-bottom: 1rem;
   }
   .product h3 {
     color: var(--primary-color);
     margin-bottom: 0.5rem;
     font-size: 1.2rem;
   }
   .product p {
     color: var(--light-text);
     font-size: 0.95rem;
     margin-bottom: 1.2rem;
     -ms-flex-positive: 1;
     flex-grow: 1;
   }
   .product-btn {
     display: inline-block;
     text-decoration: none;
     background-color: var(--primary-color);
     color: white;
     padding: 0.6rem 1.2rem;
     border-radius: 4px;
     font-weight: 500;
     text-align: center;
     transition: background-color 0.3s ease;
     margin-top: auto;
   }
   .product-btn:hover, .product-btn:focus {
     background-color: #33586e;
     color: white;
   }
   .footer {
     background-color: var(--primary-color);
     color: white;
     text-align: center;
     padding: 2rem 1rem;
     margin-top: 6rem;
   }
   form {
     display: flex;
     flex-direction: column;
     gap: 1rem;
     max-width: 500px;
     margin: auto;
   }
   .form-group {
     display: flex;
     flex-direction: column;
     gap: 0.3rem;
   }
   label {
     font-weight: 500;
     color: var(--text-color);
   }
   input, textarea, button, select {
     padding: 0.8rem;
     border-radius: 5px;
     border: 1px solid #ccc;
     font-family: inherit;
     transition: border-color 0.3s ease;
   }
   /* 焦点样式（可访问性） */
   input:focus, textarea:focus, select:focus, button:focus, a:focus {
     outline: 2px solid var(--primary-color);
     outline-offset: 2px;
   }
   .error-message {
     color: var(--error-color);
     font-size: 0.85rem;
     display: none;
     animation: fadeIn 0.3s ease; /* 错误提示动画 */
   }
   @keyframes fadeIn {
     from { opacity: 0; transform: translateY(5px); }
     to { opacity: 1; transform: translateY(0); }
   }
   input.invalid, textarea.invalid {
     border-color: var(--error-color);
   }
   input.invalid + .error-message,
   textarea.invalid + .error-message {
     display: block;
   }
   button {
     background-color: var(--accent-color);
     border: none;
     color: white;
     font-weight: bold;
     cursor: pointer;
     transition: background-color 0.3s ease;
     padding: 0.9rem;
     font-size: 1rem;
   }
   button:hover {
     background-color: #e9953a;
   }
   button:disabled {
     background-color: #f8c48d;
     cursor: not-allowed;
   }
   /* 优化加载动画 */
   .loading {
     display: inline-block;
     width: 24px;
     height: 24px;
     border: 3px solid rgba(255,255,255,.3);
     border-radius: 50%;
     border-top-color: white;
     animation: spin 0.8s linear infinite;
     margin-right: 0.5rem;
     vertical-align: middle;
   }
   @keyframes spin {
     to { transform: rotate(360deg); }
   }
   #formTarget {
     display: none;
     width: 0;
     height: 0;
     border: none;
   }
   /* 字符计数样式 */
   .char-count {
     font-size: 0.8rem;
     color: var(--light-text);
     text-align: right;
     margin-top: 0.2rem;
   }
   @media (max-width: 768px) {
     .desktop-nav {
       display: none;
     }
     .mobile-menu-btn {
       display: block;
     }
     .hero h1 { font-size: 1.8rem; }
     .product-img {
       height: 150px;
     }
   }
   @media (max-width: 480px) {
     .nav-container {
       padding: 1rem;
     }
     .hero {
       padding: 4rem 1rem;
     }
     .hero h1 { font-size: 1.6rem; }
     .section {
       margin: 3rem auto;
       padding: 0 1rem;
     }
     .product {
       padding: 1rem;
     }
   }
</style>
</head>
<body>
<header>
<div class="nav-container">
<div class="logo"
          data-text-zh="興貴創新"
          data-text-zh-CN="兴贵创新"
          data-text-en="Hing Kwai Innovate">
          興貴創新
</div>
<nav class="desktop-nav">
<a href="#about" 
   data-text-zh="品牌理念" 
   data-text-zh-CN="品牌理念" 
   data-text-en="Our Concept">品牌理念</a>
<a href="#products" 
   data-text-zh="產品介紹" 
   data-text-zh-CN="产品介绍" 
   data-text-en="Products">產品介紹</a>
<a href="#contact" 
   data-text-zh="聯絡我們" 
   data-text-zh-CN="联系我们" 
   data-text-en="Contact Us">聯絡我們</a>
<div class="lang-selector">
<select class="lang-select" id="langSelect" aria-label="切换语言">
<option value="zh">繁體中文</option>
<option value="zh-CN">简体中文</option>
<option value="en">English</option>
</select>
</div>
</nav>
<button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="打开菜单">
       ☰
</button>
</div>
<nav class="mobile-nav" id="mobileNav">
<a href="#about" 
   data-text-zh="品牌理念" 
   data-text-zh-CN="品牌理念" 
   data-text-en="Our Concept">品牌理念</a>
<a href="#products" 
   data-text-zh="產品介紹" 
   data-text-zh-CN="产品介绍" 
   data-text-en="Products">產品介紹</a>
<a href="#contact" 
   data-text-zh="聯絡我們" 
   data-text-zh-CN="联系我们" 
   data-text-en="Contact Us">聯絡我們</a>
<div class="lang-selector">
<select class="lang-select" id="mobileLangSelect" aria-label="切换语言">
<option value="zh">繁體中文</option>
<option value="zh-CN">简体中文</option>
<option value="en">English</option>
</select>
</div>
</nav>
</header>
<section class="hero">
<h1 data-text-zh="以人為本的創新，讓科技更有溫度" 
    data-text-zh-CN="以人为本的创新，让科技更有温度" 
    data-text-en="Human-centered Innovation Bringing Warmth to Technology">
     以人為本的創新，讓科技更有溫度
</h1>
<p data-text-zh="Hing Kwai Innovate 致力於結合設計與科技，傾聽每個人的真實需求，創造貼近生活的暖心創新產品。"
   data-text-zh-CN="Hing Kwai Innovate致力于结合设计与科技，倾听每个人的真实需求，创造贴近生活的暖心创新产品。"
   data-text-en="Hing Kwai Innovate merges design and technology, listening to real human needs to create warm, life-inspired innovations.">
   Hing Kwai Innovate 致力於結合設計與科技，傾聽每個人的真實需求，創造貼近生活的暖心創新產品。
</p>
</section>
<section id="about" class="section about">
<h2 data-text-zh="品牌理念" 
    data-text-zh-CN="品牌理念" 
    data-text-en="Our Concept">品牌理念</h2>
<p data-text-zh="我們相信，科技的力量應該來自於對人的理解。「以人為本」不僅是一句口號，更是我們設計每一項產品的出發點。從溫度、聲音、觸感到安全，Hing Kwai Innovate 讓每一次創新，都成為生活中細膩的關懷。"
   data-text-zh-CN="我们相信，科技的力量应该来自于对人的理解。「以人为本」不仅是一句口号，更是我们设计每一项产品的出发点。从温度、声音、触感到安全，Hing Kwai Innovate让每一次创新，都成为生活中细腻的关怀。"
   data-text-en="We believe technology’s true power comes from understanding people. 'Human-centered' is not just a slogan—it’s the starting point of every design. From warmth, sound, and touch to safety, Hing Kwai Innovate turns every innovation into genuine care in life.">
   我們相信，科技的力量應該來自於對人的理解。「以人為本」不僅是一句口號，更是我們設計每一項產品的出發點。從溫度、聲音、觸感到安全，Hing Kwai Innovate 讓每一次創新，都成為生活中細膩的關懷。
</p>
</section>
<section id="products" class="section">
<h2 data-text-zh="產品介紹" 
    data-text-zh-CN="产品介绍" 
    data-text-en="Our Products">產品介紹</h2>
<div class="products">
<div class="product">
<img src="https://picsum.photos/id/175/800/600" 
     alt="個性化風鈴" 
     class="product-img" 
     data-alt-zh="個性化風鈴" 
     data-alt-zh-CN="个性化风铃" 
     data-alt-en="Personalized Wind Chime"
     loading="lazy"
     onerror="this.src='https://picsum.photos/800/600?fallback'; this.alt='产品图片加载失败';">
<h3 data-text-zh="個性化風鈴" 
    data-text-zh-CN="个性化风铃" 
    data-text-en="Personalized Wind Chime">個性化風鈴</h3>
<p data-text-zh="自由選擇外觀與聲音設計的智慧風鈴，讓每一次微風都成為屬於你的旋律。結合聲音學與設計美學，帶來獨一無二的陪伴感。"
   data-text-zh-CN="自由选择外观与声音设计的智慧风铃，让每一次微风都成为属于你的旋律。结合声音学与设计美学，带来独一无二的陪伴感。"
   data-text-en="A smart wind chime with fully customizable look and sound—turning every breeze into your personal melody. Designed for unique companionship and aesthetic harmony.">
   自由選擇外觀與聲音設計的智慧風鈴，讓每一次微風都成為屬於你的旋律。結合聲音學與設計美學，帶來獨一無二的陪伴感。
</p>
<a href="wind-chime.html" 
   class="product-btn" 
   data-text-zh="了解更多" 
   data-text-zh-CN="了解更多" 
   data-text-en="Learn More">了解更多</a>
</div>
<div class="product">
<img src="https://picsum.photos/id/1059/800/600" 
     alt="智能安全拐杖" 
     class="product-img" 
     data-alt-zh="智能安全拐杖" 
     data-alt-zh-CN="智能安全拐杖" 
     data-alt-en="Smart Safety Cane"
     loading="lazy"
     onerror="this.src='https://picsum.photos/800/600?fallback'; this.alt='产品图片加载失败';">
<h3 data-text-zh="智能安全拐杖" 
    data-text-zh-CN="智能安全拐杖" 
    data-text-en="Smart Safety Cane">智能安全拐杖</h3>
<p data-text-zh="內建跌倒偵測與自動求助功能，結合GPS 定位與語音提示。讓長者在行走間多一份安全，也讓家人更安心。"
   data-text-zh-CN="内建跌倒侦测与自动求助功能，结合GPS定位与语音提示。让长者在行走间多一份安全，也让家人更安心。"
   data-text-en="Equipped with fall detection and automatic SOS, combining GPS tracking and voice alert. Offering confidence and peace of mind for seniors and their families.">
   內建跌倒偵測與自動求助功能，結合GPS 定位與語音提示。讓長者在行走間多一份安全，也讓家人更安心。
</p>
<a href="safety-cane.html" 
   class="product-btn" 
   data-text-zh="了解更多" 
   data-text-zh-CN="了解更多" 
   data-text-en="Learn More">了解更多</a>
</div>
<div class="product">
<img src="https://picsum.photos/id/287/800/600" 
     alt="便攜空氣過濾杯" 
     class="product-img" 
     data-alt-zh="便攜空氣過濾杯" 
     data-alt-zh-CN="便携空气过滤杯" 
     data-alt-en="Portable Air Filter Cup"
     loading="lazy"
     onerror="this.src='https://picsum.photos/800/600?fallback'; this.alt='产品图片加载失败';">
<h3 data-text-zh="便攜空氣過濾杯" 
    data-text-zh-CN="便携空气过滤杯" 
    data-text-en="Portable Air Filter Cup">便攜空氣過濾杯</h3>
<p data-text-zh="一手掌握的微型空氣淨化器，杯型設計方便攜帶。無論在辦公室、汽車或戶外，隨時呼吸潔淨空氣。"
   data-text-zh-CN="一手掌握的微型空气净化器，杯型设计方便携带。无论在办公室、汽车或户外，随时呼吸洁净空气。"
   data-text-en="A handheld air purifier in the shape of a cup—designed for mobility and elegance. Clean air within reach, wherever you are.">
   一手掌握的微型空氣淨化器，杯型設計方便攜帶。無論在辦公室、汽車或戶外，隨時呼吸潔淨空氣。
</p>
<a href="air-filter.html" 
   class="product-btn" 
   data-text-zh="了解更多" 
   data-text-zh-CN="了解更多" 
   data-text-en="Learn More">了解更多</a>
</div>
</div>
</section>
<section id="contact" class="section">
<h2 data-text-zh="聯絡我們" 
    data-text-zh-CN="联系我们" 
    data-text-en="Contact Us">聯絡我們</h2>
<form id="contactForm" action="https://docs.google.com/forms/d/e/1FAIpQLSd3-CM853sxVOKEfWh7VBD-dqHr9fNKK_B8f8aHzSsdqNOc1Q/formResponse" method="POST" target="formTarget">
<div class="form-group">
<label for="name" 
       data-text-zh="您的姓名" 
       data-text-zh-CN="您的姓名" 
       data-text-en="Your Name">您的姓名</label>
<input type="text" id="name" name="entry.2036383228" 
       placeholder="您的姓名" 
       data-placeholder-zh="您的姓名" 
       data-placeholder-zh-CN="您的姓名" 
       data-placeholder-en="Your Name" required />
<span class="error-message" 
      data-text-zh="請輸入您的姓名" 
      data-text-zh-CN="请输入您的姓名" 
      data-text-en="Please enter your name">請輸入您的姓名</span>
</div>
<div class="form-group">
<label for="email" 
       data-text-zh="您的電子郵件" 
       data-text-zh-CN="您的电子邮件" 
       data-text-en="Your Email">您的電子郵件</label>
<input type="email" id="email" name="entry.1860062296" 
       placeholder="您的電子郵件" 
       data-placeholder-zh="您的電子郵件" 
       data-placeholder-zh-CN="您的电子邮件" 
       data-placeholder-en="Your Email" required />
<span class="error-message" 
      data-text-zh="請輸入有效的電子郵件" 
      data-text-zh-CN="请输入有效的电子邮件" 
      data-text-en="Please enter a valid email address">請輸入有效的電子郵件</span>
</div>
<div class="form-group">
<label for="message" 
       data-text-zh="您的訊息" 
       data-text-zh-CN="您的消息" 
       data-text-en="Your Message">您的訊息</label>
<textarea id="message" name="entry.817479488" rows="4" 
          placeholder="請輸入您的訊息" 
          data-placeholder-zh="請輸入您的訊息" 
          data-placeholder-zh-CN="请输入您的消息" 
          data-placeholder-en="Your Message" required></textarea>
<span class="error-message" 
      data-text-zh="請輸入您的訊息（不少於10個字元）" 
      data-text-zh-CN="请输入您的消息（不少于10个字符）" 
      data-text-en="Please enter your message (at least 10 characters)">請輸入您的訊息（不少於10個字元）</span>
<!-- 字符计数 -->
<span class="char-count" 
      data-text-zh="剩餘字元: 0" 
      data-text-zh-CN="剩余字符: 0" 
      data-text-en="Remaining characters: 0">剩餘字元: 0</span>
</div>
<button type="submit" id="submitBtn" 
        data-text-zh="送出留言" 
        data-text-zh-CN="提交留言" 
        data-text-en="Send Message">送出留言</button>
</form>
<iframe id="formTarget" name="formTarget"></iframe>
</section>
<footer class="footer">
<p data-text-zh="© 2025 興貴創新 | 創意 × 科技 × 人文關懷"
   data-text-zh-CN="© 2025 兴贵创新 | 创意 × 科技 × 人文关怀"
   data-text-en="© 2025 Hing Kwai Innovate | Creativity × Technology × Human Care">
   © 2025 興貴創新 | 創意 × 科技 × 人文關懷
</p>
</footer>
<script>
   // DOM元素缓存
   const cache = {
     langSelectors: [document.getElementById('langSelect'), document.getElementById('mobileLangSelect')],
     mobileMenuBtn: document.getElementById('mobileMenuBtn'),
     mobileNav: document.getElementById('mobileNav'),
     contactForm: document.getElementById('contactForm'),
     submitBtn: document.getElementById('submitBtn'),
     formTarget: document.getElementById('formTarget'),
     header: document.querySelector('header'),
     messageField: document.getElementById('message'),
     charCount: document.querySelector('.char-count'),
     htmlElement: document.documentElement
   };

   let currentLang = 'zh'; // 默认繁体中文
   const MAX_MESSAGE_LENGTH = 500; // 文本域最大长度

   // 导航栏滚动效果
   window.addEventListener('scroll', () => {
     cache.header.classList.toggle('scrolled', window.scrollY > 50);
   });

   // 移动端菜单切换
   cache.mobileMenuBtn.addEventListener('click', () => {
     cache.mobileNav.classList.toggle('active');
     const isActive = cache.mobileNav.classList.contains('active');
     cache.mobileMenuBtn.textContent = isActive ? '✕' : '☰';
     cache.mobileMenuBtn.setAttribute('aria-label', isActive ? '关闭菜单' : '打开菜单');
   });

   // 统一语言切换函数
   const switchLanguage = (lang) => {
     if (lang === currentLang) return;
     currentLang = lang;

     // 更新根元素lang属性
     cache.htmlElement.lang = lang;

     // 同步所有下拉框选中状态
     cache.langSelectors.forEach(selector => selector.value = lang);

     // 更新所有文本内容
     document.querySelectorAll('[data-text-zh], [data-text-zh-CN], [data-text-en]').forEach(el => {
       const text = el.getAttribute(`data-text-${lang}`);
       if (text) el.textContent = text;
     });
     // 输入框占位符
     document.querySelectorAll('input, textarea').forEach(el => {
       const placeholder = el.getAttribute(`data-placeholder-${lang}`);
       if (placeholder) el.placeholder = placeholder;
     });
     // 图片alt属性
     document.querySelectorAll('[data-alt-zh], [data-alt-zh-CN], [data-alt-en]').forEach(el => {
       const alt = el.getAttribute(`data-alt-${lang}`);
       if (alt) el.alt = alt;
     });
     // 错误提示文本
     document.querySelectorAll('.error-message').forEach(el => {
       const errorText = el.getAttribute(`data-text-${lang}`);
       if (errorText) el.textContent = errorText;
     });
     // 字符计数文本
     updateCharCountText();

     // 更新页面标题
     document.title = lang === 'zh' 
       ? '興貴創新 | 以人為本的創新' 
       : lang === 'zh-CN' 
         ? '兴贵创新 | 以人为本的创新' 
         : 'Hing Kwai Innovate | Human-Centered Innovation';
   };

   // 绑定语言下拉框事件
   cache.langSelectors.forEach(selector => {
     selector.addEventListener('change', (e) => switchLanguage(e.target.value));
   });

   // 文本域字符计数更新
   const updateCharCount = () => {
     const currentLength = cache.messageField.value.length;
     const remaining = Math.max(0, MAX_MESSAGE_LENGTH - currentLength);

     cache.charCount.textContent = currentLang === 'zh' 
       ? `剩餘字元: ${remaining}` 
       : currentLang === 'zh-CN' 
         ? `剩余字符: ${remaining}` 
         : `Remaining characters: ${remaining}`;

     if (currentLength > MAX_MESSAGE_LENGTH) {
       cache.messageField.value = cache.messageField.value.substring(0, MAX_MESSAGE_LENGTH);
       cache.charCount.style.color = 'var(--error-color)';
     } else {
       cache.charCount.style.color = 'var(--light-text)';
     }
   };

   // 语言切换时同步字符计数文本
   const updateCharCountText = () => {
     const currentLength = cache.messageField.value.length;
     const remaining = Math.max(0, MAX_MESSAGE_LENGTH - currentLength);
     cache.charCount.textContent = currentLang === 'zh' 
       ? `剩餘字元: ${remaining}` 
       : currentLang === 'zh-CN' 
         ? `剩余字符: ${remaining}` 
         : `Remaining characters: ${remaining}`;
   };

   // 绑定文本域输入事件
   cache.messageField.addEventListener('input', updateCharCount);

   // 表单验证
   const validateField = (field) => {
     let isValid = true;
     const errorMsg = field.nextElementSibling;

     if (field.required && !field.value.trim()) {
       isValid = false;
     } else if (field.type === 'email' && field.value.trim()) {
       const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
       isValid = emailRegex.test(field.value.trim());
     } else if (field.id === 'message' && field.value.trim().length < 10) {
       isValid = false;
     }

     field.classList.toggle('invalid', !isValid);
     errorMsg.style.display = isValid ? 'none' : 'block';
     return isValid;
   };

   // 表单提交处理 - 仅提示成功
   cache.contactForm.addEventListener('submit', (e) => {
     e.preventDefault();

     // 先执行表单验证（确保输入有效）
     const fields = document.querySelectorAll('#contactForm input, #contactForm textarea');
     let isFormValid = true;
     fields.forEach(field => !validateField(field) && (isFormValid = false));

     if (!isFormValid) return;

     // 显示加载状态
     cache.submitBtn.disabled = true;
     const loadingText = currentLang === 'zh' 
       ? '提交中...' 
       : currentLang === 'zh-CN' 
         ? '提交中...' 
         : 'Submitting...';
     cache.submitBtn.innerHTML = `<span class="loading"></span> ${loadingText}`;

     // 无论成功失败，统一提示成功的回调函数
     const showSuccessMessage = () => {
       const thankYouMsg = currentLang === 'zh'
         ? '感謝您的反饋！我們會盡快回復。'
         : currentLang === 'zh-CN'
           ? '感谢您的反馈！我们会尽快回复。'
           : 'Thank you for your feedback! We will reply soon.';
       alert(thankYouMsg);
       cache.contactForm.reset(); // 重置表单
       resetSubmitBtn(); // 恢复按钮状态
       // 可选：2秒后返回主页
       setTimeout(() => window.location.href = 'index.html', 2000);
     };

     // 绑定iframe加载完成事件（无论结果如何都提示成功）
     cache.formTarget.onload = showSuccessMessage;
     
     // 绑定错误事件（网络错误也提示成功）
     cache.formTarget.onerror = showSuccessMessage;

     // 超时处理（超过10秒也提示成功）
     setTimeout(showSuccessMessage, 10000);

     // 提交表单
     cache.contactForm.submit();
   });

   // 重置提交按钮状态
   function resetSubmitBtn() {
     cache.submitBtn.disabled = false;
     cache.submitBtn.innerHTML = cache.submitBtn.getAttribute(`data-text-${currentLang}`);
   }

   // 兼容旧浏览器平滑滚动
   if (!('scrollBehavior' in document.documentElement.style)) {
     document.querySelectorAll('a[href^="#"]').forEach(anchor => {
       anchor.addEventListener('click', function(e) {
         e.preventDefault();
         const targetId = this.getAttribute('href');
         const targetElement = document.querySelector(targetId);
         if (targetElement) {
           window.scrollTo({
             top: targetElement.offsetTop - 80,
             behavior: 'smooth'
           });
           if (cache.mobileNav.classList.contains('active')) {
             cache.mobileNav.classList.remove('active');
             cache.mobileMenuBtn.textContent = '☰';
           }
         }
       });
     });
   }

   // 初始化字符计数
   updateCharCount();
</script>
</body>
</html>
